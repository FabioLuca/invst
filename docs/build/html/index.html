
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Welcome to INVST documentation! &#8212; Invst documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Core" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="#">
    <img class="logo" src="_static/images/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A project for algorithm trading with AlphaVantage and Comdirect.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=FabioLuca&repo=invst&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#trading-analysis">Trading analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#analysis-methods">Analysis methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#trader-automation">Trader automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#general-libraries">General libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#automation-and-scripts">Automation and scripts</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="modules.html" title="next chapter">Core</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="welcome-to-invst-documentation">
<h1>Welcome to INVST documentation!<a class="headerlink" href="#welcome-to-invst-documentation" title="Permalink to this headline">¶</a></h1>
<section id="page-contents">
<h2>Page contents<a class="headerlink" href="#page-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound" id="mastertoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#trading-analysis">Trading analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#analysis-methods">Analysis methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#trader-automation">Trader automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#general-libraries">General libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#automation-and-scripts">Automation and scripts</a></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use this project at your own risk. Authors are not responsible for losses
due to the trading strategy adopted, or issues due to account access.
Comdirect will block an account if 2-factor authentication is not properly
responded.</p>
</div>
</section>
</section>
<section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#project-goals" id="id3">Project goals</a></p>
<ul>
<li><p><a class="reference internal" href="#fetch-market-data-series-history" id="id4">Fetch market data series (history)</a></p></li>
<li><p><a class="reference internal" href="#analyze-data-for-taking-decisions-hold-buy-sell" id="id5">Analyze data for taking decisions (hold, buy, sell)</a></p></li>
<li><p><a class="reference internal" href="#execute-an-order-into-a-broker" id="id6">Execute an order into a broker</a></p></li>
<li><p><a class="reference internal" href="#fetch-account-status" id="id7">Fetch account status</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#strategy-principles" id="id8">Strategy principles</a></p></li>
<li><p><a class="reference internal" href="#to-do-s-and-future-work" id="id9">To do’s and future work</a></p></li>
<li><p><a class="reference internal" href="#setup-and-operations" id="id10">Setup and operations</a></p>
<ul>
<li><p><a class="reference internal" href="#virtual-environment" id="id11">Virtual Environment</a></p></li>
<li><p><a class="reference internal" href="#accessing-the-documentation" id="id12">Accessing the documentation</a></p></li>
<li><p><a class="reference internal" href="#unit-testing" id="id13">Unit testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#use-examples" id="id14">Use examples</a></p>
<ul>
<li><p><a class="reference internal" href="#module-example" id="id15">example.py</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#automation" id="id16">Automation</a></p>
<ul>
<li><p><a class="reference internal" href="#module-automation.comdirect_status_report" id="id17">comdirect_status_report.py</a></p></li>
<li><p><a class="reference internal" href="#module-automation.comdirect_status_update" id="id18">comdirect_status_update.py</a></p></li>
<li><p><a class="reference internal" href="#module-automation.run_analysis" id="id19">run_analysis.py</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#indices-and-tables" id="id20">Indices and tables</a></p></li>
</ul>
</div>
<section id="project-goals">
<h2>Project goals<a class="headerlink" href="#project-goals" title="Permalink to this headline">¶</a></h2>
<p>This project goal is to automate the operation of trading in the market, such as
stocks or ETF’s (Exchange Traded Fund). In priciple the same approach can be
adopted and extended to Cryptocurrencies, where the limitation is on the
trading platformed used, if it permits such operations or not.</p>
<p>The goal is not to operate as high-frequency trading, but like a regular trader.
The aimed advantages for the project is then on the potential of analysing a
bigger amount of data (different stocks or products) at a short time; apply
consistent mathematical and physical models, due to the major amount of data
and tools available.</p>
<p>This project is split into a few major elements or steps:</p>
<ol class="arabic simple">
<li><p>Fetch market data series (history)</p></li>
<li><p>Analyze data for taking decisions (hold, buy, sell)</p></li>
<li><p>Automatic execute an order into a broker</p></li>
<li><p>Fetch account status</p></li>
</ol>
<section id="fetch-market-data-series-history">
<h3>Fetch market data series (history)<a class="headerlink" href="#fetch-market-data-series-history" title="Permalink to this headline">¶</a></h3>
<p>The first element is to provide an encapsulation for accessing trading values
history for a given ticker by using the <a class="reference external" href="https://www.alphavantage.co/">AlphaVantage API</a>. Although othernnsources are possible, they
were not completely implemented yet. The output forna chosen ticker (stock) is a
Pandas dataframe containing the open-high-low-closennvalues, also known as OHLC.
More data is also available in the dataframe, as thenvolume and adjusted close
values, for example.</p>
<p>To work with the project an API key to AlphaVantage is necessary. Please follow
the instructions on their website to acquire one. Once available, a file named
<code class="docutils literal notranslate"><span class="pre">api-cfg-access.json</span></code> need to be placed directly in the <code class="docutils literal notranslate"><span class="pre">cfg</span></code> folder. The
structure of the Json data follows the template below, where <cite>&lt;YOUR API KEY&gt;</cite>
needs to be replaced by the string provided as API key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;api&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;fetching&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;AlphaVantage&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;user_data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;APIKEY&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR API KEY&gt;&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For this goal, the core implementation is done in the <code class="docutils literal notranslate"><span class="pre">data_access.py</span></code> file.</p>
</section>
<section id="analyze-data-for-taking-decisions-hold-buy-sell">
<h3>Analyze data for taking decisions (hold, buy, sell)<a class="headerlink" href="#analyze-data-for-taking-decisions-hold-buy-sell" title="Permalink to this headline">¶</a></h3>
<p>The analysis of the data in order to decide on an action to be taken is not
straight forward, since there are plural methodologies available, on many
levels of commplexity and success rate. See the section “Strategy Principles”
for more information.</p>
<p>The goal is not to expect very high success rate in the gains, but at least
have consistent improvements from a buy-hold strategy.</p>
<p>The very initial implementation is based on a simple MACD (Moving Average
Convergence Divergence) method. However the basic framework around is intended
to cover more general cases. The framework consists of:</p>
<ol class="arabic simple">
<li><p><strong>Pre-Process data</strong>: Adequate or fix data sets before analysis.</p></li>
<li><p><strong>Apply individual methods</strong>: Any possible method of analysis can be applied
independent from each other. The target is that each one produces its own
action recommendation (buy, sell or hold). Example of methods used on the
analysis:</p>
<ul class="simple">
<li><p>MACD (Moving Average Convergence Divergence)</p></li>
<li><p>RSI (Relative Strength Index)</p></li>
<li><p>Bollinger Bands</p></li>
</ul>
</li>
<li><p><strong>Arbitration</strong>: Evaluate all the previous recommendations and produces a
final recommendation.</p></li>
</ol>
<p>The basic design of this work is to always aggregate the new data into the
original Pandas dataframe, so results from analysis or any operations, are
always directly available, shall more complex operations be necessary.</p>
<p>In the framework, a metric (or many) is necessary to verify the success
obtained. As as additional steps towards analysis, each method will produce
a graphical report to evaluate and also debug the results.</p>
</section>
<section id="execute-an-order-into-a-broker">
<h3>Execute an order into a broker<a class="headerlink" href="#execute-an-order-into-a-broker" title="Permalink to this headline">¶</a></h3>
<p>This step is not implemented yet.</p>
</section>
<section id="fetch-account-status">
<h3>Fetch account status<a class="headerlink" href="#fetch-account-status" title="Permalink to this headline">¶</a></h3>
<p>As a mean to provide capacity to manage the operation, the Comdirect account
status is tracked by fetching all the current balances and depots informations
(values, prices), which are provided as Pandas dataframes and can be stored as
Micrsoft Excel files, for example, as provided in <code class="docutils literal notranslate"><span class="pre">example.py</span></code>, or stored in
databases for further analysis (e.g. display evolution in chart).</p>
<p>In terms of implementation, all the <a class="reference external" href="https://www.comdirect.de/cms/kontakt-zugaenge-api.html">Comdirect API</a> related access and
handling is done by the <code class="docutils literal notranslate"><span class="pre">session.py</span></code>.</p>
<p>For access, similar to other cases above, the information must be provided in
the <code class="docutils literal notranslate"><span class="pre">api-cfg-access.json</span></code> (to be placed in the <code class="docutils literal notranslate"><span class="pre">cfg</span></code> folder). The structure
to be followed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;api&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;trading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;Comdirect&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;user_data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR CLIENT ID&gt;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;client_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR CLIENT SECRET&gt;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;account_number&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR ACCOUNT NUMBER&gt;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;pin&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;YOUR ACCOUNT PIN&gt;&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The client ID and secret can be obtanined from the Comdirect website. Please
follow the instructions from their API documentation on how to obtain them.</p>
</section>
</section>
<section id="strategy-principles">
<h2>Strategy principles<a class="headerlink" href="#strategy-principles" title="Permalink to this headline">¶</a></h2>
<p>To cover the principles, the starting point will be the OHLC (Open High Low
Close) data table for Amazon (AMZN) between 10.12.2021 and 09.11.2021:</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Example of data from Amazon</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Date</p></th>
<th class="head"><p>Open</p></th>
<th class="head"><p>High</p></th>
<th class="head"><p>Low</p></th>
<th class="head"><p>Close</p></th>
<th class="head"><p>Volume</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>12/10/21</p></td>
<td><p>3508,34</p></td>
<td><p>3518,54</p></td>
<td><p>3410,00</p></td>
<td><p>3444,24</p></td>
<td><p>3034488</p></td>
</tr>
<tr class="row-odd"><td><p>12/09/21</p></td>
<td><p>3515,00</p></td>
<td><p>3539,39</p></td>
<td><p>3482,79</p></td>
<td><p>3483,42</p></td>
<td><p>2303091</p></td>
</tr>
<tr class="row-even"><td><p>12/08/21</p></td>
<td><p>3523,01</p></td>
<td><p>3543,60</p></td>
<td><p>3495,01</p></td>
<td><p>3523,16</p></td>
<td><p>2262683</p></td>
</tr>
<tr class="row-odd"><td><p>12/07/21</p></td>
<td><p>3492,00</p></td>
<td><p>3549,99</p></td>
<td><p>3466,69</p></td>
<td><p>3523,29</p></td>
<td><p>3320536</p></td>
</tr>
<tr class="row-even"><td><p>12/06/21</p></td>
<td><p>3393,00</p></td>
<td><p>3473,91</p></td>
<td><p>3338,69</p></td>
<td><p>3427,37</p></td>
<td><p>3443000</p></td>
</tr>
<tr class="row-odd"><td><p>12/03/21</p></td>
<td><p>3455,00</p></td>
<td><p>3469,865</p></td>
<td><p>3338,60</p></td>
<td><p>3389,79</p></td>
<td><p>4035550</p></td>
</tr>
<tr class="row-even"><td><p>12/02/21</p></td>
<td><p>3460,00</p></td>
<td><p>3492,70</p></td>
<td><p>3423,75</p></td>
<td><p>3437,36</p></td>
<td><p>3236288</p></td>
</tr>
<tr class="row-odd"><td><p>12/01/21</p></td>
<td><p>3545,00</p></td>
<td><p>3559,88</p></td>
<td><p>3441,60</p></td>
<td><p>3443,72</p></td>
<td><p>3756995</p></td>
</tr>
<tr class="row-even"><td><p>11/30/21</p></td>
<td><p>3563,50</p></td>
<td><p>3585,77</p></td>
<td><p>3492,01</p></td>
<td><p>3507,07</p></td>
<td><p>4001107</p></td>
</tr>
<tr class="row-odd"><td><p>11/29/21</p></td>
<td><p>3547,644</p></td>
<td><p>3596,00</p></td>
<td><p>3531,50</p></td>
<td><p>3561,57</p></td>
<td><p>3265557</p></td>
</tr>
<tr class="row-even"><td><p>11/26/21</p></td>
<td><p>3602,095</p></td>
<td><p>3633,50</p></td>
<td><p>3504,15</p></td>
<td><p>3504,56</p></td>
<td><p>2991297</p></td>
</tr>
<tr class="row-odd"><td><p>11/24/21</p></td>
<td><p>3562,67</p></td>
<td><p>3613,64</p></td>
<td><p>3536,85</p></td>
<td><p>3580,41</p></td>
<td><p>2328018</p></td>
</tr>
<tr class="row-even"><td><p>11/23/21</p></td>
<td><p>3585,04</p></td>
<td><p>3621,05</p></td>
<td><p>3527,71</p></td>
<td><p>3580,04</p></td>
<td><p>3692246</p></td>
</tr>
<tr class="row-odd"><td><p>11/22/21</p></td>
<td><p>3676,377</p></td>
<td><p>3713,455</p></td>
<td><p>3567,50</p></td>
<td><p>3572,57</p></td>
<td><p>4847850</p></td>
</tr>
<tr class="row-even"><td><p>11/19/21</p></td>
<td><p>3712,69</p></td>
<td><p>3762,145</p></td>
<td><p>3675,72</p></td>
<td><p>3676,57</p></td>
<td><p>4946203</p></td>
</tr>
<tr class="row-odd"><td><p>11/18/21</p></td>
<td><p>3566,35</p></td>
<td><p>3704,20</p></td>
<td><p>3561,00</p></td>
<td><p>3696,06</p></td>
<td><p>5703538</p></td>
</tr>
<tr class="row-even"><td><p>11/17/21</p></td>
<td><p>3564,72</p></td>
<td><p>3587,245</p></td>
<td><p>3545,35</p></td>
<td><p>3549,00</p></td>
<td><p>2560270</p></td>
</tr>
<tr class="row-odd"><td><p>11/16/21</p></td>
<td><p>3539,00</p></td>
<td><p>3576,50</p></td>
<td><p>3525,146</p></td>
<td><p>3540,70</p></td>
<td><p>2217071</p></td>
</tr>
<tr class="row-even"><td><p>11/15/21</p></td>
<td><p>3537,00</p></td>
<td><p>3593,88</p></td>
<td><p>3525,81</p></td>
<td><p>3545,68</p></td>
<td><p>2929719</p></td>
</tr>
<tr class="row-odd"><td><p>11/12/21</p></td>
<td><p>3485,00</p></td>
<td><p>3540,726</p></td>
<td><p>3447,05</p></td>
<td><p>3525,15</p></td>
<td><p>2689434</p></td>
</tr>
<tr class="row-even"><td><p>11/11/21</p></td>
<td><p>3513,00</p></td>
<td><p>3543,24</p></td>
<td><p>3467,47</p></td>
<td><p>3472,50</p></td>
<td><p>2264406</p></td>
</tr>
<tr class="row-odd"><td><p>11/10/21</p></td>
<td><p>3563,87</p></td>
<td><p>3605,45</p></td>
<td><p>3463,09</p></td>
<td><p>3482,05</p></td>
<td><p>4027422</p></td>
</tr>
<tr class="row-even"><td><p>11/09/21</p></td>
<td><p>3515,25</p></td>
<td><p>3593,77</p></td>
<td><p>3501,425</p></td>
<td><p>3576,23</p></td>
<td><p>4294922</p></td>
</tr>
</tbody>
</table>
<p>The strategies for investiment covered here are basically of 2 types:</p>
<ol class="arabic simple">
<li><p>Momentum analysis</p></li>
<li><p>Prediction based on neural networks</p></li>
</ol>
<p>The two have different ways of working. The former is based on an “inertia” of
the market, relying mostly that the market tries to correct itself whenever
oversold or overbought. Like a physical system, the mostly a position is off
balance, the stronger the correction is expected.</p>
<p>The second method is based on RNN (recurrent neural netoworks). Based on
the history of price for a stock, which is supplied to a RNN for learning, new
data (future) is predicted.</p>
<p>A major difference is on the way data is handled by both of the methods. While
the first uses the history and suggests an outcome which tend to be valid for a
few days or weeks, due to the system inertia, the second will produce much more
shorter term predictions if applied to the actual price (e.g. closing price),
since it tries to replicate the feature performance. Of course the same method
can be equally applied to other values or indicators, such a moving average
(where the fast changing component is filtered out) or to a MACD histogram.</p>
<p>As an illustration of the different structure of the outcomes, the table below
shows a general outcome based on the data above for Amazon, for an analysis
ran on the 10.12.2021:</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Example of results</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Date</p></th>
<th class="head"><p>Close</p></th>
<th class="head"><p>Momentum Analysis</p></th>
<th class="head"><p>NN Analysis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>12/17/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-odd"><td><p>12/16/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-even"><td><p>12/15/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-odd"><td><p>12/14/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-even"><td><p>12/13/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-odd"><td><p>12/12/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-even"><td><p>12/11/21</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Prediction</p></td>
</tr>
<tr class="row-odd"><td><p>12/10/21</p></td>
<td><p>3444,24</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Input Data</p></td>
</tr>
<tr class="row-even"><td><p>12/09/21</p></td>
<td><p>3483,42</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Input Data</p></td>
</tr>
<tr class="row-odd"><td><p>12/08/21</p></td>
<td><p>3523,16</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Input Data</p></td>
</tr>
<tr class="row-even"><td><p>12/07/21</p></td>
<td><p>3523,29</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Input Data</p></td>
</tr>
<tr class="row-odd"><td><p>12/06/21</p></td>
<td><p>3427,37</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>12/03/21</p></td>
<td><p>3389,79</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>12/02/21</p></td>
<td><p>3437,36</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>12/01/21</p></td>
<td><p>3443,72</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/30/21</p></td>
<td><p>3507,07</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/29/21</p></td>
<td><p>3561,57</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/26/21</p></td>
<td><p>3504,56</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/24/21</p></td>
<td><p>3580,41</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/23/21</p></td>
<td><p>3580,04</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/22/21</p></td>
<td><p>3572,57</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/19/21</p></td>
<td><p>3676,57</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/18/21</p></td>
<td><p>3696,06</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/17/21</p></td>
<td><p>3549,00</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/16/21</p></td>
<td><p>3540,70</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/15/21</p></td>
<td><p>3545,68</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/12/21</p></td>
<td><p>3525,15</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/11/21</p></td>
<td><p>3472,50</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-even"><td><p>11/10/21</p></td>
<td><p>3482,05</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
<tr class="row-odd"><td><p>11/09/21</p></td>
<td><p>3576,23</p></td>
<td><p>Buy/Hold/Sell</p></td>
<td><p>Learning Data</p></td>
</tr>
</tbody>
</table>
<p>Especially for the Neural-Network example above, the length of the data is
chosen just to illustrate its presence, and not the actual length. As observed
above, the last input data used to make the prediction has a length of 4.</p>
<p>Combining both methods is the ultimate goal, since there is a potential to
optmize the strategy combining the benefits of each other.</p>
<p>As another demonstration of the data organization, see the figure below. The
image presents the way the data is handled: first the methods will add their
signals to the structure, second the predictions are done to extrapolate the
data into the future.</p>
<a class="reference internal image-reference" href="_images/strategy_data.png"><img alt="Data structure" class="align-center" src="_images/strategy_data.png" style="width: 600px;" /></a>
</section>
<section id="to-do-s-and-future-work">
<h2>To do’s and future work<a class="headerlink" href="#to-do-s-and-future-work" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fetch the data from tickers besides AlphaVantage, as it only supports stocks.
Adding other sources could support ETF’s and crypto’s for instance.</p></li>
<li><p>Fetch data from API’s which provide more up-to-data data, without bigger
delays such as 1-day delay, since it can impact the algorithm decision.</p></li>
<li><p>Improve the trading strategies.</p></li>
<li><p>Optmize parameters in the RNN, since it is still based on the vanilla version.</p></li>
<li><p>Complete the trading implementation, as the order placement is missing.
Currently only the fetching of account and depot information is implemented.</p></li>
</ul>
</section>
<section id="setup-and-operations">
<h2>Setup and operations<a class="headerlink" href="#setup-and-operations" title="Permalink to this headline">¶</a></h2>
<section id="virtual-environment">
<h3>Virtual Environment<a class="headerlink" href="#virtual-environment" title="Permalink to this headline">¶</a></h3>
<p>It is recommended to run the project with a Virtual Environment. To do so,
first make sure to have the package available in you computer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
</pre></div>
</div>
<p>This step should be common between Linux and Windows systems.</p>
<p>Once available (succesful install), a virtual environement can be created by
the following steps:</p>
<ol class="arabic">
<li><p>Go to project root folder</p></li>
<li><p>Run the command below, where <cite>&lt;name_of_virtualenv&gt;</cite> is to be replacd by the
name desired, for example: <cite>venv</cite>. Note that the command for python might
change depending on the installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="o">&lt;</span><span class="n">name_of_virtualenv</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The commmand above should be similar between Linux and Windows systems.</p>
</li>
</ol>
<p>After creation, the virtual environmnet can be started by the following
command. Keep in mind that the <cite>&lt;name_of_virtualenv&gt;</cite> is to be replaced by the
name definied on the previous step. for Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">&lt;</span><span class="n">name_of_virtualenv</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>For Windows systems:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">name_of_virtualenv</span><span class="o">&gt;/</span><span class="n">Scripts</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Once started, in the terminal it will be indicated that a virtual environment
is running by a tag <cite>(&lt;name_of_virtualenv&gt;)</cite>.</p>
<p>After started the virtual environement, the necessary packages for this project
can be installed by the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">src</span><span class="o">/</span><span class="n">Requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Later, the environmenet can be deactivate when necessary by the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deactivate</span>
</pre></div>
</div>
</section>
<section id="accessing-the-documentation">
<h3>Accessing the documentation<a class="headerlink" href="#accessing-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>The documentation can be generated by using Sphinx. In order to do so, first
acrivate the virtual environement, and then from the project <cite>docs</cite> folder use
the command below. This is valid for Linux or Windows when using its terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>In case of Windows with Powershell, the proper command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span>\<span class="n">make</span><span class="o">.</span><span class="n">bat</span> <span class="n">html</span>
</pre></div>
</div>
<p>The resulting documentation (<cite>index.html</cite>) is available in the folder
<cite>docs/build/html</cite>.</p>
</section>
<section id="unit-testing">
<h3>Unit testing<a class="headerlink" href="#unit-testing" title="Permalink to this headline">¶</a></h3>
<p>Unit test cases are available in the <cite>tests</cite> folder. The tests are based in the
<cite>pytest</cite> package. To run all the tests, after activating the virtual
environement, use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="n">tests</span><span class="o">/</span>
</pre></div>
</div>
<p>In case to run individual test files, for example <cite>test_access.py</cite>, then use
the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_access</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
</section>
<section id="use-examples">
<h2>Use examples<a class="headerlink" href="#use-examples" title="Permalink to this headline">¶</a></h2>
<section id="module-example">
<span id="example-py"></span><h3>example.py<a class="headerlink" href="#module-example" title="Permalink to this headline">¶</a></h3>
<p>Example for the use of the project. The following steps are taken:</p>
<ol class="arabic simple">
<li><p><strong>Create a logger</strong>, so all the steps during the execution are presented,
either to have information of the current status to the user, or to support
debugging. By default, the display to the user is done with <cite>info</cite> level,
whilst the storrage in the log files are done with <cite>debug</cite> level.</p></li>
<li><p><strong>Load the configurations</strong>, since the project depends on configuration
input for the access of the API’s, the <cite>.json</cite> files are loaded and the
content stored in dictionaries to be used by the next steps.</p></li>
<li><p><strong>Fetch ticker data</strong> from AlphaVantage API. For example purpose, two cases
are done, first trying to fetch from an invalid ticker (<cite>GOOG2</cite>) and then
in sequence trying to fetch for a list of valid symbols.</p></li>
<li><p><strong>Perform analysis</strong> per symbol, producing a result for each one. See the
documentation for the strategy analysis for more details.</p></li>
<li><p><strong>Display</strong> on the console an overview of the results.</p></li>
<li><p><strong>Fetch depot status</strong> from Comdirect account, where for each available
element in the depot account, its values (e.g. current price, purchase price)
are returned to be used for performance tracking.</p></li>
<li><p><strong>Store the results</strong> in Microsoft Excel files, saving a different file per
day (current date is used in the filename), and each data having a separate
sheet in the <cite>.xlsx</cite> file.</p></li>
</ol>
<p>Other files in the automation folder can be used as examples.</p>
</section>
</section>
<section id="automation">
<h2>Automation<a class="headerlink" href="#automation" title="Permalink to this headline">¶</a></h2>
<p>As a general note when running the automation scripts, to be able to
successfu execute them, due to importing and relative path management, the
following command is to be used from the project root folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">automation</span><span class="o">.&lt;</span><span class="n">Script</span> <span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For the <cite>&lt;Script name&gt;</cite> the .py extension shall not be used.</p>
<section id="module-automation.comdirect_status_report">
<span id="comdirect-status-report-py"></span><h3>comdirect_status_report.py<a class="headerlink" href="#module-automation.comdirect_status_report" title="Permalink to this headline">¶</a></h3>
<p>Automation script to display charts and reports of the data collected and
stored in the Excel files in the <cite>export</cite> folder. The script will parse the
Excel data in the files.</p>
<p>This script is based on Dash and Plotly, and the execution will result into a
server which can be accessed by the addressed informed on the console, for
example: <a class="reference external" href="http://127.0.0.1:8050/">http://127.0.0.1:8050/</a></p>
<p>Only the files matching the pattern <cite>Export_Comdirect_</cite> are evaluated, so any
other files in the folder will be ignored.</p>
</section>
<section id="module-automation.comdirect_status_update">
<span id="comdirect-status-update-py"></span><h3>comdirect_status_update.py<a class="headerlink" href="#module-automation.comdirect_status_update" title="Permalink to this headline">¶</a></h3>
<p>Script for getting the current values from Comdirect and storing into Excel
files, to be used as a tracker.</p>
</section>
<section id="module-automation.run_analysis">
<span id="run-analysis-py"></span><h3>run_analysis.py<a class="headerlink" href="#module-automation.run_analysis" title="Permalink to this headline">¶</a></h3>
<p>Script for sequence analysis of a list of symbols / tickers and providing
a report of the overall results for performance evaluation.</p>
</section>
</section>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021, Fabio de Luca.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>